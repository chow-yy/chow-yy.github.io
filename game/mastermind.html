<!DOCTYPE html>
/*polished by chatgpt*/
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mastermind</title>
<style>
    /* === GLOBAL STYLE === */
    body {
        background-color: #F4E9D8;
        color: #111111;
        font-family: "Inter", "Helvetica Neue", Arial, sans-serif;
        display: grid;
        place-items: center;
        min-height: 100vh;
        margin: 0;
    }

    .container {
        background-color: #FFF9F0;
        border: 2px solid #222222;
        border-radius: 20px;
        box-shadow: 4px 4px 0 #222222;
        padding: 32px;
        max-width: 550px;
        width: 90%;
    }

    h1, h2, h3 {
        text-align: center;
        font-weight: 800;
        letter-spacing: 1px;
    }

    h1 {
        font-size: 2rem;
        margin-bottom: 1rem;
    }

    h2 {
        font-size: 1.4rem;
        margin-top: 0.5rem;
        margin-bottom: 0.5rem;
    }

    /* === SETUP SCREEN === */
    #setup-screen {
        text-align: center;
    }

    .input-group {
        margin: 15px 0;
    }

    label {
        display: block;
        font-weight: 600;
        margin-bottom: 6px;
    }

    input[type="number"] {
        font-size: 1.2em;
        padding: 6px 10px;
        border: 2px solid #222222;
        border-radius: 12px;
        background-color: #FFF9F0;
        color: #111111;
        text-align: center;
        width: 80px;
    }

    /* === BUTTONS === */
    button {
        display: block;
        width: 100%;
        font-size: 1.1em;
        font-weight: 600;
        border: 2px solid #222222;
        border-radius: 12px;
        padding: 10px 20px;
        background-color: #F4E9D8;
        color: #111111;
        cursor: pointer;
        transition: all 0.15s ease;
        box-shadow: 2px 2px 0 #222222;
    }

    button:hover {
        background-color: #EADCC5;
        transform: translate(-1px, -1px);
    }

    /* === GAME SCREEN === */
    #game-screen {
        display: none;
    }

    #game-instructions {
        text-align: center;
        font-size: 0.95em;
        color: #444;
        margin-bottom: 12px;
    }

    #guess-input {
        width: 100%;
        font-size: 1.2em;
        padding: 10px;
        border: 2px solid #222222;
        border-radius: 12px;
        text-align: center;
        background-color: #FFF9F0;
        margin-bottom: 12px;
    }

    /* === STATUS DISPLAY === */
    #status-display {
        text-align: center;
        font-weight: 600;
        font-size: 1.1em;
        min-height: 1.5em;
        margin-top: 10px;
        color: #BB3333;
    }

    #status-display.win {
        color: #2D7A42;
    }

    /* === TABLE STYLING === */
    #results-table {
        width: 100%;
        border-collapse: separate;
        border-spacing: 0 8px;
        margin-top: 15px;
    }

    #results-table th {
        background-color: #F4E9D8;
        border: 2px solid #222222;
        border-radius: 10px;
        padding: 6px 10px;
    }

    #results-table td {
        border: 2px solid #222222;
        border-radius: 10px;
        padding: 8px;
        text-align: center;
        font-weight: 600;
        background-color: #FFF9F0;
    }

    #results-table td:nth-child(3) {
        color: #2D7A42;
    }

    #results-table td:nth-child(4) {
        color: #AA7A00;
    }

    /* === BACK LINK === */
    .back-link {
        display: inline-block;
        margin-bottom: 16px;
        color: #111111;
        font-weight: 600;
        text-decoration: none;
    }

    .back-link:hover {
        text-decoration: underline;
    }
</style>
</head>
<body>

<div class="container">
    <a href="../game.html" class="back-link">&larr; Back to ðŸ¥¨</a>

    <!-- SETUP SCREEN -->
    <div id="setup-screen">
        <h1>MASTERMIND</h1>
        <div class="input-group">
            <label for="n-length-input">Code Length (n)</label>
            <input type="number" id="n-length-input" value="4" min="4" max="10">
        </div>
        <div class="input-group">
            <label for="n-range-input">Max Number (N)</label>
            <input type="number" id="n-range-input" value="8" min="6" max="20">
        </div>
        <button id="start-button">Start Game</button>
    </div>

    <!-- GAME SCREEN -->
    <div id="game-screen">
        <h2 id="game-title">Guess the 4-number sequence</h2>
        <p id="game-instructions">
            Numbers are from 1 to 8. No repeats.<br>
            <strong>Separate numbers with a space.</strong>
        </p>
        <input type="text" id="guess-input" placeholder="e.g., 1 2 3 4">
        <button id="guess-button">Submit Guess</button>
        <div id="status-display"></div>
        <div id="history-area">
            <h3>Guess History</h3>
            <table id="results-table">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>Guess</th>
                        <th>A</th>
                        <th>B</th>
                    </tr>
                </thead>
                <tbody id="results-body"></tbody>
            </table>
        </div>
    </div>
</div>

<script>
/* === Your full game logic, unchanged === */
const setupScreen = document.getElementById('setup-screen');
const gameScreen = document.getElementById('game-screen');
const nLengthInput = document.getElementById('n-length-input');
const nRangeInput = document.getElementById('n-range-input');
const startButton = document.getElementById('start-button');
const gameTitle = document.getElementById('game-title');
const gameInstructions = document.getElementById('game-instructions');
const guessInput = document.getElementById('guess-input');
const guessButton = document.getElementById('guess-button');
const statusDisplay = document.getElementById('status-display');
const resultsBody = document.getElementById('results-body');

let n_Length = 0;
let N_Range = 0;
let secret = [];
let isGameWon = false;
let tryCount = 0;

startButton.addEventListener('click', startGame);
guessButton.addEventListener('click', processGuess);
guessInput.addEventListener('keyup', e => { if (e.key === 'Enter') processGuess(); });

function startGame() {
    const nValue = parseInt(nLengthInput.value);
    const NValue = parseInt(nRangeInput.value);
    if (isNaN(nValue) || nValue < 4 || nValue > 10) return alert("n must be between 4 and 10");
    if (isNaN(NValue) || NValue < 6 || NValue > 20) return alert("N must be between 6 and 20");
    if (nValue > NValue) return alert("N must be >= n");

    n_Length = nValue; N_Range = NValue;
    isGameWon = false; tryCount = 0;
    secret = shuffle([...Array(N_Range).keys()].map(i => i + 1)).slice(0, n_Length);

    setupScreen.style.display = 'none';
    gameScreen.style.display = 'block';
    gameTitle.innerText = `Guess the ${n_Length}-number sequence`;
    gameInstructions.innerHTML = `Numbers are from 1 to ${N_Range}. No repeats.<br><strong>Separate numbers with a space.</strong>`;
    guessInput.placeholder = `e.g., ${[...Array(n_Length)].map((_, i) => i + 1).join(' ')}`;
    resultsBody.innerHTML = '';
    statusDisplay.textContent = 'Good luck!';
    statusDisplay.className = '';
}

function shuffle(array) {
    for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
    }
    return array;
}

function processGuess() {
    if (isGameWon) return;
    const guessArray = guessInput.value.trim().split(' ').map(x => parseInt(x));
    const err = validateGuess(guessArray);
    if (err) { statusDisplay.textContent = err; statusDisplay.className = ''; return; }

    tryCount++;
    const { A, B } = calculateAB(guessArray);
    addHistoryRow(tryCount, guessArray.join(' '), A, B);

    if (A === n_Length) {
        isGameWon = true;
        statusDisplay.textContent = `ðŸŽ‰ You guessed it in ${tryCount} tries!`;
        statusDisplay.className = 'win';
        setupScreen.style.display = 'block';
        startButton.textContent = 'Play Again?';
    } else {
        guessInput.value = '';
        statusDisplay.textContent = '';
        guessInput.focus();
    }
}

function validateGuess(T) {
    if (T.length !== n_Length) return `Your guess must have ${n_Length} numbers.`;
    const seen = new Set();
    for (const num of T) {
        if (isNaN(num)) return "Only numbers allowed.";
        if (num < 1 || num > N_Range) return `Numbers must be between 1 and ${N_Range}.`;
        if (seen.has(num)) return "No duplicate numbers allowed.";
        seen.add(num);
    }
    return null;
}

function calculateAB(guess) {
    let A = 0, B = 0;
    let sUnmatched = [], gUnmatched = [];
    for (let i = 0; i < n_Length; i++) {
        if (guess[i] === secret[i]) A++;
        else { sUnmatched.push(secret[i]); gUnmatched.push(guess[i]); }
    }
    for (const g of gUnmatched) {
        const idx = sUnmatched.indexOf(g);
        if (idx !== -1) { B++; sUnmatched.splice(idx, 1); }
    }
    return { A, B };
}

function addHistoryRow(count, guessString, A, B) {
    const row = resultsBody.insertRow(0);
    row.innerHTML = `<td>${count}</td><td>${guessString}</td><td>${A}</td><td>${B}</td>`;
}
</script>

</body>
</html>
